{"ast":null,"code":"import _asyncToGenerator from \"E:/CS-Project/RestaurantApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../restaurant.service\";\n\nfunction AdminComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33)(2, \"div\", 34)(3, \"div\", 35)(4, \"a\", 36);\n    i0.ɵɵelement(5, \"img\", 37);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 38)(7, \"h5\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"ul\", 39)(10, \"li\", 40);\n    i0.ɵɵelement(11, \"i\", 41);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"li\", 40);\n    i0.ɵɵelement(14, \"i\", 41);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"li\", 40);\n    i0.ɵɵelement(17, \"i\", 41);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 42)(20, \"div\", 43)(21, \"a\", 44);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_18_Template_a_click_21_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const restaurant_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onOpenModal(restaurant_r2, \"edit\"));\n    });\n    i0.ɵɵelement(22, \"i\", 45);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"a\", 46);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_18_Template_a_click_23_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const restaurant_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onOpenModal(restaurant_r2, \"delete\"));\n    });\n    i0.ɵɵelement(24, \"i\", 47);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const restaurant_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"href\", restaurant_r2 == null ? null : restaurant_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", restaurant_r2 == null ? null : restaurant_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(restaurant_r2 == null ? null : restaurant_r2.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"$\", restaurant_r2 == null ? null : restaurant_r2.price, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(restaurant_r2 == null ? null : restaurant_r2.type);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(restaurant_r2 == null ? null : restaurant_r2.description);\n  }\n}\n\nfunction AdminComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"div\", 49)(2, \"h4\", 50);\n    i0.ɵɵtext(3, \"No Selections!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"No Selections were found.\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nexport class AdminComponent {\n  constructor(router, restaurantService) {\n    this.router = router;\n    this.restaurantService = restaurantService;\n    this.restaurants = [];\n    this.failed = false;\n  }\n\n  ngOnInit() {\n    this.getRestaurants();\n  }\n\n  getRestaurants() {\n    this.restaurantService.getRestaurants().subscribe(response => {\n      this.restaurants = response;\n    }, error => {\n      alert(error.message);\n    });\n  }\n\n  onAddRestaurant(addForm) {\n    document.getElementById('add-restaurant-form')?.click();\n    this.restaurantService.addRestaurant(addForm.value).subscribe(response => {\n      console.log(response);\n      this.getRestaurants();\n      addForm.reset();\n    }, error => {\n      alert(error.message);\n      addForm.reset();\n    });\n  }\n\n  onUpdateRestaurant(restaurant) {\n    this.restaurantService.updateRestaurant(restaurant).subscribe(response => {\n      console.log(response);\n      this.getRestaurants();\n    }, error => {\n      alert(error.message);\n    });\n  }\n\n  onDeleteRestaurant(restaurantId) {\n    this.restaurantService.deleteRestaurant(restaurantId).subscribe(response => {\n      console.log(response);\n      this.getRestaurants();\n    }, error => {\n      alert(error.message);\n    });\n  }\n\n  searchRestaurants(key) {\n    const results = [];\n\n    for (const restaurant of this.restaurants) {\n      if (restaurant.name.toLowerCase().indexOf(key.toLowerCase()) !== -1 || restaurant.type.toLowerCase().indexOf(key.toLowerCase()) !== -1 || restaurant.price.toString().indexOf(key.toLowerCase()) !== -1) {\n        results.push(restaurant);\n      }\n    }\n\n    this.restaurants = results;\n\n    if (results.length === 0 || !key) {\n      this.getRestaurants();\n    }\n  }\n\n  onOpenModal(restaurant, mode) {\n    const container = document.getElementById('main-container');\n    const button = document.createElement('button');\n    button.type = 'button';\n    button.style.display = 'none';\n    button.setAttribute('data-toggle', 'modal');\n\n    if (mode === 'add') {\n      button.setAttribute('data-target', '#addRestaurantModal');\n    }\n\n    if (mode === 'edit') {\n      this.editRestaurant = restaurant || undefined;\n      button.setAttribute('data-target', '#updateRestaurantModal');\n    }\n\n    if (mode === 'delete') {\n      this.deleteRestaurant = restaurant || undefined;\n      button.setAttribute('data-target', '#deleteRestaurantModal');\n    }\n\n    container?.appendChild(button);\n    button.click();\n  }\n\n  logout() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let resp = _this.restaurantService.logout(); //   resp.subscribe({\n      //     next: resp => this.router.navigate([\"login\"]),\n      //     error:  (error) => this.failed=true//(error)=> this.failed = true\n      //   })\n\n\n      resp.subscribe(response => {\n        console.log(response);\n      }, error => {\n        alert(error.message);\n      }); //\n      // (response: this.restaurantService.logout()) => {\n      //   this.restaurants = response;\n      // },\n      // (error: HttpErrorResponse) => {\n      //   alert(error.message);\n      // }\n    })();\n  }\n\n}\n\nAdminComponent.ɵfac = function AdminComponent_Factory(t) {\n  return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.RestaurantService));\n};\n\nAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AdminComponent,\n  selectors: [[\"app-admin\"]],\n  decls: 57,\n  vars: 4,\n  consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-dark\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"assets/logo.png\", 1, \"rounded-image\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarColor02\", \"aria-controls\", \"navbarColor02\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarColor02\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"mr-auto\"], [1, \"nav-item\", \"active\"], [1, \"nav-link\", 3, \"click\"], [1, \"sr-only\"], [\"href\", \"login\", 1, \"navbar-brand\"], [\"src\", \"assets/LogoutButtonRestaurant.drawio.png\", 1, \"rounded-image\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarColor02\", \"aria-controls\", \"navbarColor02\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\", 3, \"ngSubmit\"], [\"id\", \"main-container\", 1, \"container-fluid\"], [1, \"row\"], [\"class\", \"col-md-6 col-xl-3 d-flex\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"addRestaurantModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"addRestaurantModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"addRestaurantModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [\"id\", \"updateRestaurantModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"restaurantEditModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"updateRestaurantModalLabel\", 1, \"modal-title\"], [\"id\", \"deleteRestaurantModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"deleteModelLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"deleteModelLabel\", 1, \"modal-title\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"data-dismiss\", \"modal\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"class\", \"col-lg-12 col-md-12 col-xl-12\", 4, \"ngIf\"], [1, \"col-md-6\", \"col-xl-3\", \"d-flex\"], [1, \"card\", \"m-b-30\"], [1, \"card-body\", \"flex-fill\", \"row\"], [1, \"col-6\"], [\"target\", \"_blank\", 3, \"href\"], [\"alt\", \"\", 1, \"img-fluid\", \"img\", \"w-60\", 3, \"src\"], [1, \"col-6\", \"card-title\", \"align-self-center\", \"mb-0\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\", \"d-flex\"], [1, \"fa\", \"fa-envelope\", \"float-right\"], [1, \"card-body\", \"flex-fill\", \"selectors\"], [1, \"float-right\", \"btn-group\", \"btn-group-sm\"], [\"data-placement\", \"top\", \"data-original-title\", \"Edit\", 1, \"btn\", \"btn-primary\", \"tooltips\", 3, \"click\"], [1, \"fa\", \"fa-pencil\"], [\"data-placement\", \"top\", \"data-original-title\", \"Delete\", 1, \"btn\", \"btn-secondary\", \"tooltips\", 3, \"click\"], [1, \"fa\", \"fa-times\"], [1, \"col-lg-12\", \"col-md-12\", \"col-xl-12\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [1, \"alert-heading\"]],\n  template: function AdminComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0)(1, \"a\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 3);\n      i0.ɵɵelement(4, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 5)(6, \"ul\", 6)(7, \"li\", 7)(8, \"a\", 8);\n      i0.ɵɵlistener(\"click\", function AdminComponent_Template_a_click_8_listener() {\n        return ctx.onOpenModal(null, \"add\");\n      });\n      i0.ɵɵtext(9, \"Add a new Restaurant?\");\n      i0.ɵɵelementStart(10, \"span\", 9);\n      i0.ɵɵtext(11, \"(current)\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(12, \"a\", 10);\n      i0.ɵɵelement(13, \"img\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 12);\n      i0.ɵɵlistener(\"ngSubmit\", function AdminComponent_Template_button_ngSubmit_14_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵelement(15, \"span\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"div\", 13)(17, \"div\", 14);\n      i0.ɵɵtemplate(18, AdminComponent_div_18_Template, 25, 6, \"div\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 16)(20, \"div\", 17)(21, \"div\", 18)(22, \"div\", 19)(23, \"h5\", 20);\n      i0.ɵɵtext(24, \"Add new Restaurant\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"button\", 21)(26, \"span\", 22);\n      i0.ɵɵtext(27, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(28, \"div\", 23);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(29, \"div\", 24)(30, \"div\", 17)(31, \"div\", 18)(32, \"div\", 19)(33, \"h5\", 25);\n      i0.ɵɵtext(34);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"button\", 21)(36, \"span\", 22);\n      i0.ɵɵtext(37, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(38, \"div\", 23);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(39, \"div\", 26)(40, \"div\", 17)(41, \"div\", 18)(42, \"div\", 19)(43, \"h5\", 27);\n      i0.ɵɵtext(44, \"Delete Restaurant\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"button\", 21)(46, \"span\", 22);\n      i0.ɵɵtext(47, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(48, \"div\", 23)(49, \"p\");\n      i0.ɵɵtext(50);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"div\", 28)(52, \"button\", 29);\n      i0.ɵɵtext(53, \"No\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"button\", 30);\n      i0.ɵɵlistener(\"click\", function AdminComponent_Template_button_click_54_listener() {\n        return ctx.onDeleteRestaurant(ctx.deleteRestaurant == null ? null : ctx.deleteRestaurant.id);\n      });\n      i0.ɵɵtext(55, \"Yes\");\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵtemplate(56, AdminComponent_div_56_Template, 6, 0, \"div\", 31);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngForOf\", ctx.restaurants);\n      i0.ɵɵadvance(16);\n      i0.ɵɵtextInterpolate1(\"Currently editing: \", ctx.editRestaurant == null ? null : ctx.editRestaurant.name, \"\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵtextInterpolate1(\"Are you sure you want to delete \", ctx.deleteRestaurant == null ? null : ctx.deleteRestaurant.name, \"?\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (ctx.restaurants == null ? null : ctx.restaurants.length) == 0);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZG1pbi5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AdminComponent","constructor","router","restaurantService","ngOnInit","getRestaurants","subscribe","response","restaurants","error","alert","message","onAddRestaurant","addForm","document","getElementById","click","addRestaurant","value","console","log","reset","onUpdateRestaurant","restaurant","updateRestaurant","onDeleteRestaurant","restaurantId","deleteRestaurant","searchRestaurants","key","results","name","toLowerCase","indexOf","type","price","toString","push","length","onOpenModal","mode","container","button","createElement","style","display","setAttribute","editRestaurant","undefined","appendChild","logout","resp","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\CS-Project\\RestaurantApp\\frontend\\src\\app\\components\\admin\\admin.component.html","E:\\CS-Project\\RestaurantApp\\frontend\\src\\app\\components\\admin\\admin.component.ts"],"sourcesContent":["<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n\r\n  <a class=\"navbar-brand\" href=\"#\">\r\n    <img class=\"rounded-image\" src=\"assets/logo.png\">\r\n  </a>\r\n\r\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarColor02\" aria-controls=\"navbarColor02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n\r\n  <div class=\"collapse navbar-collapse\" id=\"navbarColor02\">\r\n    <ul class=\"navbar-nav mr-auto\">\r\n        <li class=\"nav-item active\">\r\n          <a class=\"nav-link\" (click)=\"onOpenModal(null, 'add')\">Add a new Restaurant?<span class=\"sr-only\">(current)</span></a>\r\n        </li>\r\n    </ul>\r\n\r\n\r\n    <a class=\"navbar-brand\" href=\"login\">\r\n      <img class=\"rounded-image\" src=\"assets/LogoutButtonRestaurant.drawio.png\">\r\n    </a>\r\n    <button class=\"navbar-toggler\" type=\"button\"  data-toggle=\"collapse\" data-target=\"#navbarColor02\" (ngSubmit)=\"logout()\" aria-controls=\"navbarColor02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n      <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n\r\n\r\n    <!-- <form class=\"form-inline my-2 my-lg-0\">\r\n        <input type=\"search\" (ngModelChange)=\"searchRestaurants(key.value)\" #key=\"ngModel\" ngModel\r\n        name=\"key\" id=\"searchName\" class=\"form-control mr-sm-2\" placeholder=\"Looking for a New Selection?\" required>\r\n    </form> -->\r\n\r\n\r\n  </div>\r\n\r\n</nav>\r\n\r\n<div class=\"container-fluid\" id=\"main-container\">\r\n\r\n  <div class=\"row \">\r\n    <div *ngFor=\"let restaurant of restaurants\" class=\"col-md-6 col-xl-3 d-flex\">\r\n      <div class=\"card m-b-30\">\r\n          <div class=\"card-body flex-fill row\">\r\n            <div class=\"col-6\">\r\n                <a [href]=\"restaurant?.image\" target=\"_blank\"><img src=\"{{restaurant?.image}}\" alt=\"\" class=\"img-fluid img w-60\"></a>\r\n            </div>\r\n            <div class=\"col-6 card-title align-self-center mb-0 \">\r\n                <h5>{{restaurant?.name}}</h5>\r\n            </div>\r\n          </div>\r\n\r\n          <ul class=\"list-group list-group-flush\">\r\n            <li class=\"list-group-item d-flex\"><i class=\"fa fa-envelope float-right\"></i>${{restaurant?.price}}</li>\r\n            <li class=\"list-group-item d-flex\"><i class=\"fa fa-envelope float-right\"></i>{{restaurant?.type}}</li>\r\n            <li class=\"list-group-item d-flex\"><i class=\"fa fa-envelope float-right\"></i>{{restaurant?.description}}</li>\r\n          </ul>\r\n\r\n          <div class=\"card-body flex-fill selectors\">\r\n            <div class=\"float-right btn-group btn-group-sm\">\r\n                <a (click)=\"onOpenModal(restaurant, 'edit')\" class=\"btn btn-primary tooltips\" data-placement=\"top\" data-original-title=\"Edit\"><i class=\"fa fa-pencil\"></i> </a>\r\n                <a (click)=\"onOpenModal(restaurant, 'delete')\" class=\"btn btn-secondary tooltips\" data-placement=\"top\" data-original-title=\"Delete\"><i class=\"fa fa-times\"></i></a>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Add Restaurant Modal -->\r\n  <div class=\"modal fade\" id=\"addRestaurantModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"addRestaurantModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"addRestaurantModalLabel\">Add new Restaurant</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n<!--\r\n            <form #addForm = \"ngForm\" (ngSubmit)=\"onAddRestaurant(addForm)\">\r\n              <div class=\"form-group\">\r\n                <label for=\"name\">Name</label>\r\n                <input type=\"text\" ngModel name=\"name\" class=\"form-control\" id=\"name\" placeholder=\"Name\" required>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"type\">Type</label> //restaurant\r\n                <input type=\"text\" ngModel name=\"type\" class=\"form-control\" id=\"type\" placeholder=\"Type\" required>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"price\">Price</label>\r\n                <input type=\"number\" ngModel name=\"price\" class=\"form-control\" id=\"price\" placeholder=\"Price\" required>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"image\">Image</label>\r\n                <input type=\"text\" ngModel name=\"image\" class=\"form-control\" id=\"image\" placeholder=\"Image\" required>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"description\">Description</label>\r\n                <input type=\"text\" ngModel name=\"description\" class=\"form-control\" id=\"description\" placeholder=\"Description\" required>\r\n              </div>\r\n              <div class=\"modal-footer\">\r\n                <button type=\"button\" id=\"add-restaurant-form\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                <button [disabled]=\"addForm.invalid\" type=\"submit\" class=\"btn btn-primary\" >Save changes</button>\r\n              </div>\r\n            </form> -->\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n\r\n  <!-- Edit Restaurant Modal -->\r\n  <div class=\"modal fade\" id=\"updateRestaurantModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"restaurantEditModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"updateRestaurantModalLabel\">Currently editing: {{editRestaurant?.name}}</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n<!--\r\n            <form #editForm = \"ngForm\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"name\">Name</label>\r\n                  <input type=\"text\" ngModel = {{editRestaurant?.name}} name=\"name\" class=\"form-control\" id=\"name\" aria-describedby=\"emailHelp\" placeholder=\"Name\">\r\n                </div>\r\n\r\n                <input type=\"hidden\" ngModel = {{editRestaurant?.id}} name=\"id\" class=\"form-control\" id=\"id\" placeholder=\"Name\">\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"type\">Type</label>\r\n                  <input type=\"text\" ngModel = {{editRestaurant?.type}} name=\"type\" class=\"form-control\" id=\"type\" placeholder=\"Type\">\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"price\">Price</label>\r\n                  <input type=\"number\" ngModel = {{editRestaurant?.price}} name=\"price\" class=\"form-control\" id=\"price\" placeholder=\"Price\">\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"image\">Image</label>\r\n                  <input type=\"text\" ngModel = {{editRestaurant?.image}} name=\"image\" class=\"form-control\" id=\"image\" placeholder=\"Image\">\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"description\">Description</label>\r\n                  <input type=\"text\" ngModel = {{editRestaurant?.description}} name=\"description\" class=\"form-control\" id=\"description\" placeholder=\"Description\">\r\n                </div>\r\n\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" id=\"\" data-dismiss=\"modal\" class=\"btn btn-secondary\">Close</button>\r\n                  <button (click) = \"onUpdateRestaurant(editForm.value)\" data-dismiss=\"modal\" class=\"btn btn-primary\" >Save changes</button>\r\n                </div>\r\n            </form> -->\r\n\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Delete Restaurant Modal -->\r\n  <div class=\"modal fade\" id=\"deleteRestaurantModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"deleteModelLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"deleteModelLabel\">Delete Restaurant</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p>Are you sure you want to delete {{deleteRestaurant?.name}}?</p>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">No</button>\r\n                <button (click)=\"onDeleteRestaurant(deleteRestaurant?.id!)\" class=\"btn btn-danger\" data-dismiss=\"modal\">Yes</button>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Notification for no Restaurant -->\r\n<div *ngIf=\"restaurants?.length == 0\" class=\"col-lg-12 col-md-12 col-xl-12\">\r\n<div class=\"alert alert-info\" role=\"alert\">\r\n  <h4 class=\"alert-heading\">No Selections!</h4>\r\n  <p>No Selections were found.</p>\r\n</div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Restaurant } from '../../restaurant';\r\nimport { RestaurantService } from '../../restaurant.service';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { NgForm} from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-admin',\r\n  templateUrl: './admin.component.html',\r\n  styleUrls: ['./admin.component.css']\r\n})\r\nexport class AdminComponent implements OnInit {\r\n  public restaurants: Restaurant[] = [];\r\n  public editRestaurant: Restaurant | undefined;\r\n  public deleteRestaurant: Restaurant | undefined;\r\n\r\n  failed: boolean = false;\r\n  constructor (private router: Router, private restaurantService: RestaurantService) {}\r\n\r\n  ngOnInit() {\r\n    this.getRestaurants();\r\n  }\r\n\r\n  public getRestaurants(): void {\r\n    this.restaurantService.getRestaurants().subscribe(\r\n      (response: Restaurant[]) => {\r\n        this.restaurants = response;\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        alert(error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  public onAddRestaurant(addForm: NgForm): void {\r\n    document.getElementById('add-restaurant-form')?.click();\r\n    this.restaurantService.addRestaurant(addForm.value).subscribe(\r\n      (response: Restaurant) => {\r\n        console.log(response);\r\n        this.getRestaurants();\r\n        addForm.reset();\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        alert(error.message);\r\n        addForm.reset();\r\n      }\r\n    );\r\n  }\r\n\r\n  public onUpdateRestaurant(restaurant: Restaurant): void {\r\n    this.restaurantService.updateRestaurant(restaurant).subscribe(\r\n      (response: Restaurant) => {\r\n        console.log(response);\r\n        this.getRestaurants();\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        alert(error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  public onDeleteRestaurant(restaurantId: number): void {\r\n    this.restaurantService.deleteRestaurant(restaurantId).subscribe(\r\n      (response: void) => {\r\n        console.log(response);\r\n        this.getRestaurants();\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        alert(error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  public searchRestaurants(key: string): void {\r\n    const results: Restaurant[] = [];\r\n    for(const restaurant of this.restaurants) {\r\n      if (restaurant.name.toLowerCase().indexOf(key.toLowerCase()) !== -1\r\n      || restaurant.type.toLowerCase().indexOf(key.toLowerCase()) !== -1\r\n      || restaurant.price.toString().indexOf(key.toLowerCase()) !== -1) {\r\n        results.push(restaurant)\r\n      }\r\n    }\r\n    this.restaurants = results;\r\n    if (results.length === 0 || !key) {\r\n      this.getRestaurants();\r\n    }\r\n  }\r\n\r\n  public onOpenModal(restaurant: Restaurant|null, mode: string): void {\r\n    const container = document.getElementById('main-container');\r\n    const button = document.createElement('button');\r\n    button.type = 'button';\r\n    button.style.display = 'none';\r\n    button.setAttribute('data-toggle', 'modal');\r\n    if (mode === 'add') {\r\n      button.setAttribute('data-target', '#addRestaurantModal');\r\n    }\r\n    if (mode === 'edit') {\r\n      this.editRestaurant = restaurant || undefined;\r\n      button.setAttribute('data-target', '#updateRestaurantModal');\r\n    }\r\n    if (mode === 'delete') {\r\n      this.deleteRestaurant = restaurant || undefined;\r\n      button.setAttribute('data-target', '#deleteRestaurantModal');\r\n    }\r\n    container?.appendChild(button);\r\n    button.click();\r\n  }\r\n\r\n  async logout(){\r\n    let resp = this.restaurantService.logout();\r\n  //   resp.subscribe({\r\n  //     next: resp => this.router.navigate([\"login\"]),\r\n  //     error:  (error) => this.failed=true//(error)=> this.failed = true\r\n  //   })\r\n  resp.subscribe(\r\n    response => {\r\n      console.log(response);\r\n    },\r\n    (error: HttpErrorResponse) =>{\r\n      alert(error.message);\r\n    }\r\n  );\r\n\r\n  //\r\n  // (response: this.restaurantService.logout()) => {\r\n  //   this.restaurants = response;\r\n  // },\r\n  // (error: HttpErrorResponse) => {\r\n  //   alert(error.message);\r\n  // }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}