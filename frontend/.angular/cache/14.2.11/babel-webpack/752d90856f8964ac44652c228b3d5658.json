{"ast":null,"code":"import _asyncToGenerator from \"/Users/alexfederico/Documents/GitHub/RestaurantApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../restaurant.service\";\n\nfunction AdminComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"div\", 34)(2, \"div\", 35)(3, \"div\", 36)(4, \"a\", 37);\n    i0.ɵɵelement(5, \"img\", 38);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 39)(7, \"h5\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"ul\", 40)(10, \"li\", 41);\n    i0.ɵɵelement(11, \"i\", 42);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"li\", 41);\n    i0.ɵɵelement(14, \"i\", 42);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"li\", 41);\n    i0.ɵɵelement(17, \"i\", 42);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 43)(20, \"div\", 44)(21, \"a\", 45);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_19_Template_a_click_21_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const restaurant_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onOpenModal(restaurant_r2, \"edit\"));\n    });\n    i0.ɵɵelement(22, \"i\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"a\", 47);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_19_Template_a_click_23_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const restaurant_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onOpenModal(restaurant_r2, \"delete\"));\n    });\n    i0.ɵɵelement(24, \"i\", 48);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const restaurant_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"href\", restaurant_r2 == null ? null : restaurant_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", restaurant_r2 == null ? null : restaurant_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(restaurant_r2 == null ? null : restaurant_r2.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"$\", restaurant_r2 == null ? null : restaurant_r2.price, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(restaurant_r2 == null ? null : restaurant_r2.type);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(restaurant_r2 == null ? null : restaurant_r2.description);\n  }\n}\n\nfunction AdminComponent_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"div\", 50)(2, \"h4\", 51);\n    i0.ɵɵtext(3, \"No Selections!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"No Selections were found.\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nexport class AdminComponent {\n  constructor(router, restaurantService) {\n    this.router = router;\n    this.restaurantService = restaurantService;\n    this.restaurants = [];\n    this.failed = false;\n  }\n\n  ngOnInit() {\n    this.getRestaurants();\n  }\n\n  getRestaurants() {\n    this.restaurantService.getRestaurants().subscribe(response => {\n      this.restaurants = response;\n    }, error => {\n      alert(error.message);\n    });\n  }\n\n  onAddRestaurant(addForm) {\n    document.getElementById('add-restaurant-form')?.click();\n    this.restaurantService.addRestaurant(addForm.value).subscribe(response => {\n      console.log(response);\n      this.getRestaurants();\n      addForm.reset();\n    }, error => {\n      alert(error.message);\n      addForm.reset();\n    });\n  }\n\n  onUpdateRestaurant(restaurant) {\n    this.restaurantService.updateRestaurant(restaurant).subscribe(response => {\n      console.log(response);\n      this.getRestaurants();\n    }, error => {\n      alert(error.message);\n    });\n  }\n\n  onDeleteRestaurant(restaurantId) {\n    this.restaurantService.deleteRestaurant(restaurantId).subscribe(response => {\n      console.log(response);\n      this.getRestaurants();\n    }, error => {\n      alert(error.message);\n    });\n  }\n\n  searchRestaurants(key) {\n    const results = [];\n\n    for (const restaurant of this.restaurants) {\n      if (restaurant.name.toLowerCase().indexOf(key.toLowerCase()) !== -1 || restaurant.type.toLowerCase().indexOf(key.toLowerCase()) !== -1 || restaurant.price.toString().indexOf(key.toLowerCase()) !== -1) {\n        results.push(restaurant);\n      }\n    }\n\n    this.restaurants = results;\n\n    if (results.length === 0 || !key) {\n      this.getRestaurants();\n    }\n  }\n\n  onOpenModal(restaurant, mode) {\n    const container = document.getElementById('main-container');\n    const button = document.createElement('button');\n    button.type = 'button';\n    button.style.display = 'none';\n    button.setAttribute('data-toggle', 'modal');\n\n    if (mode === 'add') {\n      button.setAttribute('data-target', '#addRestaurantModal');\n    }\n\n    if (mode === 'edit') {\n      this.editRestaurant = restaurant || undefined;\n      button.setAttribute('data-target', '#updateRestaurantModal');\n    }\n\n    if (mode === 'delete') {\n      this.deleteRestaurant = restaurant || undefined;\n      button.setAttribute('data-target', '#deleteRestaurantModal');\n    }\n\n    container?.appendChild(button);\n    button.click();\n  }\n\n  logout() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let resp = _this.restaurantService.logout(); //   resp.subscribe({\n      //     next: resp => this.router.navigate([\"login\"]),\n      //     error:  (error) => this.failed=true//(error)=> this.failed = true\n      //   })\n\n\n      resp.subscribe(response => {\n        console.log(response);\n      }, error => {\n        alert(error.message);\n      }); //\n      // (response: this.restaurantService.logout()) => {\n      //   this.restaurants = response;\n      // },\n      // (error: HttpErrorResponse) => {\n      //   alert(error.message);\n      // }\n    })();\n  }\n\n}\n\nAdminComponent.ɵfac = function AdminComponent_Factory(t) {\n  return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.RestaurantService));\n};\n\nAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AdminComponent,\n  selectors: [[\"app-admin\"]],\n  decls: 58,\n  vars: 4,\n  consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-dark\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"assets/logo.png\", 1, \"rounded-image\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarColor02\", \"aria-controls\", \"navbarColor02\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarColor02\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"mr-auto\"], [1, \"nav-item\", \"active\"], [1, \"nav-link\", 3, \"click\"], [1, \"sr-only\"], [\"href\", \"login\", 1, \"navbar-brand\"], [\"src\", \"assets/LoginButton.drawio.png\", 1, \"rounded-image\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarColor02\", \"aria-controls\", \"navbarColor02\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\", 3, \"ngSubmit\"], [1, \"form-inline\", \"my-2\", \"my-lg-0\"], [\"id\", \"main-container\", 1, \"container-fluid\"], [1, \"row\"], [\"class\", \"col-md-6 col-xl-3 d-flex\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"addRestaurantModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"addRestaurantModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"addRestaurantModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [\"id\", \"updateRestaurantModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"restaurantEditModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"updateRestaurantModalLabel\", 1, \"modal-title\"], [\"id\", \"deleteRestaurantModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"deleteModelLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"deleteModelLabel\", 1, \"modal-title\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"data-dismiss\", \"modal\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"class\", \"col-lg-12 col-md-12 col-xl-12\", 4, \"ngIf\"], [1, \"col-md-6\", \"col-xl-3\", \"d-flex\"], [1, \"card\", \"m-b-30\"], [1, \"card-body\", \"flex-fill\", \"row\"], [1, \"col-6\"], [\"target\", \"_blank\", 3, \"href\"], [\"alt\", \"\", 1, \"img-fluid\", \"img\", \"w-60\", 3, \"src\"], [1, \"col-6\", \"card-title\", \"align-self-center\", \"mb-0\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\", \"d-flex\"], [1, \"fa\", \"fa-envelope\", \"float-right\"], [1, \"card-body\", \"flex-fill\", \"selectors\"], [1, \"float-right\", \"btn-group\", \"btn-group-sm\"], [\"data-placement\", \"top\", \"data-original-title\", \"Edit\", 1, \"btn\", \"btn-primary\", \"tooltips\", 3, \"click\"], [1, \"fa\", \"fa-pencil\"], [\"data-placement\", \"top\", \"data-original-title\", \"Delete\", 1, \"btn\", \"btn-secondary\", \"tooltips\", 3, \"click\"], [1, \"fa\", \"fa-times\"], [1, \"col-lg-12\", \"col-md-12\", \"col-xl-12\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [1, \"alert-heading\"]],\n  template: function AdminComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0)(1, \"a\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 3);\n      i0.ɵɵelement(4, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 5)(6, \"ul\", 6)(7, \"li\", 7)(8, \"a\", 8);\n      i0.ɵɵlistener(\"click\", function AdminComponent_Template_a_click_8_listener() {\n        return ctx.onOpenModal(null, \"add\");\n      });\n      i0.ɵɵtext(9, \"Add a new Restaurant?\");\n      i0.ɵɵelementStart(10, \"span\", 9);\n      i0.ɵɵtext(11, \"(current)\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(12, \"a\", 10);\n      i0.ɵɵelement(13, \"img\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 12);\n      i0.ɵɵlistener(\"ngSubmit\", function AdminComponent_Template_button_ngSubmit_14_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵelement(15, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"form\", 13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 14)(18, \"div\", 15);\n      i0.ɵɵtemplate(19, AdminComponent_div_19_Template, 25, 6, \"div\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 17)(21, \"div\", 18)(22, \"div\", 19)(23, \"div\", 20)(24, \"h5\", 21);\n      i0.ɵɵtext(25, \"Add new Restaurant\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 22)(27, \"span\", 23);\n      i0.ɵɵtext(28, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(29, \"div\", 24);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"div\", 25)(31, \"div\", 18)(32, \"div\", 19)(33, \"div\", 20)(34, \"h5\", 26);\n      i0.ɵɵtext(35);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"button\", 22)(37, \"span\", 23);\n      i0.ɵɵtext(38, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(39, \"div\", 24);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(40, \"div\", 27)(41, \"div\", 18)(42, \"div\", 19)(43, \"div\", 20)(44, \"h5\", 28);\n      i0.ɵɵtext(45, \"Delete Restaurant\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"button\", 22)(47, \"span\", 23);\n      i0.ɵɵtext(48, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(49, \"div\", 24)(50, \"p\");\n      i0.ɵɵtext(51);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"div\", 29)(53, \"button\", 30);\n      i0.ɵɵtext(54, \"No\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(55, \"button\", 31);\n      i0.ɵɵlistener(\"click\", function AdminComponent_Template_button_click_55_listener() {\n        return ctx.onDeleteRestaurant(ctx.deleteRestaurant == null ? null : ctx.deleteRestaurant.id);\n      });\n      i0.ɵɵtext(56, \"Yes\");\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵtemplate(57, AdminComponent_div_57_Template, 6, 0, \"div\", 32);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngForOf\", ctx.restaurants);\n      i0.ɵɵadvance(16);\n      i0.ɵɵtextInterpolate1(\"Currently editing: \", ctx.editRestaurant == null ? null : ctx.editRestaurant.name, \"\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵtextInterpolate1(\"Are you sure you want to delete \", ctx.deleteRestaurant == null ? null : ctx.deleteRestaurant.name, \"?\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (ctx.restaurants == null ? null : ctx.restaurants.length) == 0);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZG1pbi5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;IAqCIA,gCAA6E,CAA7E,EAA6E,KAA7E,EAA6E,EAA7E,EAA6E,CAA7E,EAA6E,KAA7E,EAA6E,EAA7E,EAA6E,CAA7E,EAA6E,KAA7E,EAA6E,EAA7E,EAA6E,CAA7E,EAA6E,GAA7E,EAA6E,EAA7E;IAI0DA;IAAmEA;IAErHA,gCAAsD,CAAtD,EAAsD,IAAtD;IACQA;IAAoBA;IAI9BA,+BAAwC,EAAxC,EAAwC,IAAxC,EAAwC,EAAxC;IACqCA;IAA0CA;IAAsBA;IACnGA;IAAmCA;IAA0CA;IAAoBA;IACjGA;IAAmCA;IAA0CA;IAA2BA;IAG1GA,iCAA2C,EAA3C,EAA2C,KAA3C,EAA2C,EAA3C,EAA2C,EAA3C,EAA2C,GAA3C,EAA2C,EAA3C;IAESA;MAAA;MAAA;MAAA;MAAA,OAASA,iDAAwB,MAAxB,EAAT;IAAwC,CAAxC;IAA2HA;IAA6BA;IAC3JA;IAAGA;MAAA;MAAA;MAAA;MAAA,OAASA,iDAAwB,QAAxB,EAAT;IAA0C,CAA1C;IAAiIA;IAA2BA;;;;;IAhB5JA;IAAAA;IAAgDA;IAAAA;IAG/CA;IAAAA;IAKqEA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;;;;;;IAmIzFA,gCAA4E,CAA5E,EAA4E,KAA5E,EAA4E,EAA5E,EAA4E,CAA5E,EAA4E,IAA5E,EAA4E,EAA5E;IAE4BA;IAAcA;IACxCA;IAAGA;IAAyBA;;;;AC7K9B,OAAM,MAAOC,cAAP,CAAqB;EAMzBC,YAAqBC,MAArB,EAA6CC,iBAA7C,EAAiF;IAA5D;IAAwB;IALtC,mBAA4B,EAA5B;IAIP,cAAkB,KAAlB;EACqF;;EAErFC,QAAQ;IACN,KAAKC,cAAL;EACD;;EAEMA,cAAc;IACnB,KAAKF,iBAAL,CAAuBE,cAAvB,GAAwCC,SAAxC,CACGC,QAAD,IAA2B;MACzB,KAAKC,WAAL,GAAmBD,QAAnB;IACD,CAHH,EAIGE,KAAD,IAA6B;MAC3BC,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;IACD,CANH;EAQD;;EAEMC,eAAe,CAACC,OAAD,EAAgB;IACpCC,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,GAAgDC,KAAhD;IACA,KAAKb,iBAAL,CAAuBc,aAAvB,CAAqCJ,OAAO,CAACK,KAA7C,EAAoDZ,SAApD,CACGC,QAAD,IAAyB;MACvBY,OAAO,CAACC,GAAR,CAAYb,QAAZ;MACA,KAAKF,cAAL;MACAQ,OAAO,CAACQ,KAAR;IACD,CALH,EAMGZ,KAAD,IAA6B;MAC3BC,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;MACAE,OAAO,CAACQ,KAAR;IACD,CATH;EAWD;;EAEMC,kBAAkB,CAACC,UAAD,EAAuB;IAC9C,KAAKpB,iBAAL,CAAuBqB,gBAAvB,CAAwCD,UAAxC,EAAoDjB,SAApD,CACGC,QAAD,IAAyB;MACvBY,OAAO,CAACC,GAAR,CAAYb,QAAZ;MACA,KAAKF,cAAL;IACD,CAJH,EAKGI,KAAD,IAA6B;MAC3BC,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;IACD,CAPH;EASD;;EAEMc,kBAAkB,CAACC,YAAD,EAAqB;IAC5C,KAAKvB,iBAAL,CAAuBwB,gBAAvB,CAAwCD,YAAxC,EAAsDpB,SAAtD,CACGC,QAAD,IAAmB;MACjBY,OAAO,CAACC,GAAR,CAAYb,QAAZ;MACA,KAAKF,cAAL;IACD,CAJH,EAKGI,KAAD,IAA6B;MAC3BC,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;IACD,CAPH;EASD;;EAEMiB,iBAAiB,CAACC,GAAD,EAAY;IAClC,MAAMC,OAAO,GAAiB,EAA9B;;IACA,KAAI,MAAMP,UAAV,IAAwB,KAAKf,WAA7B,EAA0C;MACxC,IAAIe,UAAU,CAACQ,IAAX,CAAgBC,WAAhB,GAA8BC,OAA9B,CAAsCJ,GAAG,CAACG,WAAJ,EAAtC,MAA6D,CAAC,CAA9D,IACDT,UAAU,CAACW,IAAX,CAAgBF,WAAhB,GAA8BC,OAA9B,CAAsCJ,GAAG,CAACG,WAAJ,EAAtC,MAA6D,CAAC,CAD7D,IAEDT,UAAU,CAACY,KAAX,CAAiBC,QAAjB,GAA4BH,OAA5B,CAAoCJ,GAAG,CAACG,WAAJ,EAApC,MAA2D,CAAC,CAF/D,EAEkE;QAChEF,OAAO,CAACO,IAAR,CAAad,UAAb;MACD;IACF;;IACD,KAAKf,WAAL,GAAmBsB,OAAnB;;IACA,IAAIA,OAAO,CAACQ,MAAR,KAAmB,CAAnB,IAAwB,CAACT,GAA7B,EAAkC;MAChC,KAAKxB,cAAL;IACD;EACF;;EAEMkC,WAAW,CAAChB,UAAD,EAA8BiB,IAA9B,EAA0C;IAC1D,MAAMC,SAAS,GAAG3B,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAlB;IACA,MAAM2B,MAAM,GAAG5B,QAAQ,CAAC6B,aAAT,CAAuB,QAAvB,CAAf;IACAD,MAAM,CAACR,IAAP,GAAc,QAAd;IACAQ,MAAM,CAACE,KAAP,CAAaC,OAAb,GAAuB,MAAvB;IACAH,MAAM,CAACI,YAAP,CAAoB,aAApB,EAAmC,OAAnC;;IACA,IAAIN,IAAI,KAAK,KAAb,EAAoB;MAClBE,MAAM,CAACI,YAAP,CAAoB,aAApB,EAAmC,qBAAnC;IACD;;IACD,IAAIN,IAAI,KAAK,MAAb,EAAqB;MACnB,KAAKO,cAAL,GAAsBxB,UAAU,IAAIyB,SAApC;MACAN,MAAM,CAACI,YAAP,CAAoB,aAApB,EAAmC,wBAAnC;IACD;;IACD,IAAIN,IAAI,KAAK,QAAb,EAAuB;MACrB,KAAKb,gBAAL,GAAwBJ,UAAU,IAAIyB,SAAtC;MACAN,MAAM,CAACI,YAAP,CAAoB,aAApB,EAAmC,wBAAnC;IACD;;IACDL,SAAS,EAAEQ,WAAX,CAAuBP,MAAvB;IACAA,MAAM,CAAC1B,KAAP;EACD;;EAEKkC,MAAM;IAAA;;IAAA;MACV,IAAIC,IAAI,GAAG,KAAI,CAAChD,iBAAL,CAAuB+C,MAAvB,EAAX,CADU,CAEZ;MACA;MACA;MACA;;;MACAC,IAAI,CAAC7C,SAAL,CACEC,QAAQ,IAAG;QACTY,OAAO,CAACC,GAAR,CAAYb,QAAZ;MACD,CAHH,EAIGE,KAAD,IAA6B;QAC3BC,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;MACD,CANH,EANY,CAcZ;MACA;MACA;MACA;MACA;MACA;MACA;IApBY;EAqBX;;AAvHwB;;;mBAAdX,gBAAcD;AAAA;;;QAAdC;EAAcoD;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDZ3BzD,+BAAyD,CAAzD,EAAyD,GAAzD,EAAyD,CAAzD;MAGIA;MACFA;MAEAA;MACEA;MACFA;MAEAA,+BAAyD,CAAzD,EAAyD,IAAzD,EAAyD,CAAzD,EAAyD,CAAzD,EAAyD,IAAzD,EAAyD,CAAzD,EAAyD,CAAzD,EAAyD,GAAzD,EAAyD,CAAzD;MAG4BA;QAAA,OAAS0D,gBAAY,IAAZ,EAAkB,KAAlB,CAAT;MAAiC,CAAjC;MAAmC1D;MAAqBA;MAAsBA;MAASA;MAKjHA;MACEA;MACFA;MACAA;MAAkGA;QAAA,OAAY0D,YAAZ;MAAoB,CAApB;MAChG1D;MACFA;MAGAA;MAIFA;MAIFA,iCAAiD,EAAjD,EAAiD,KAAjD,EAAiD,EAAjD;MAGIA;MAyBFA;MAGAA,iCAAyI,EAAzI,EAAyI,KAAzI,EAAyI,EAAzI,EAAyI,EAAzI,EAAyI,KAAzI,EAAyI,EAAzI,EAAyI,EAAzI,EAAyI,KAAzI,EAAyI,EAAzI,EAAyI,EAAzI,EAAyI,IAAzI,EAAyI,EAAzI;MAI+DA;MAAkBA;MACvEA,oCAA4E,EAA5E,EAA4E,MAA5E,EAA4E,EAA5E;MACyBA;MAAOA;MAGpCA;MA8BFA;MAKJA,iCAA6I,EAA7I,EAA6I,KAA7I,EAA6I,EAA7I,EAA6I,EAA7I,EAA6I,KAA7I,EAA6I,EAA7I,EAA6I,EAA7I,EAA6I,KAA7I,EAA6I,EAA7I,EAA6I,EAA7I,EAA6I,IAA7I,EAA6I,EAA7I;MAIkEA;MAA2CA;MACnGA,oCAA4E,EAA5E,EAA4E,MAA5E,EAA4E,EAA5E;MACyBA;MAAOA;MAGlCA;MAqCJA;MAKJA,iCAAqI,EAArI,EAAqI,KAArI,EAAqI,EAArI,EAAqI,EAArI,EAAqI,KAArI,EAAqI,EAArI,EAAqI,EAArI,EAAqI,KAArI,EAAqI,EAArI,EAAqI,EAArI,EAAqI,IAArI,EAAqI,EAArI;MAIwDA;MAAiBA;MAC/DA,oCAA4E,EAA5E,EAA4E,MAA5E,EAA4E,EAA5E;MACyBA;MAAOA;MAGlCA,iCAAwB,EAAxB,EAAwB,GAAxB;MACKA;MAA2DA;MAC9DA,iCAA0B,EAA1B,EAA0B,QAA1B,EAA0B,EAA1B;MACyEA;MAAEA;MACvEA;MAAQA;QAAA,OAAS0D,qFAAT;MAAkD,CAAlD;MAAgG1D;MAAGA;MAS3HA;;;;MAjJgCA;MAAAA;MA4EoCA;MAAAA;MAyDrDA;MAAAA;MAYTA;MAAAA","names":["i0","AdminComponent","constructor","router","restaurantService","ngOnInit","getRestaurants","subscribe","response","restaurants","error","alert","message","onAddRestaurant","addForm","document","getElementById","click","addRestaurant","value","console","log","reset","onUpdateRestaurant","restaurant","updateRestaurant","onDeleteRestaurant","restaurantId","deleteRestaurant","searchRestaurants","key","results","name","toLowerCase","indexOf","type","price","toString","push","length","onOpenModal","mode","container","button","createElement","style","display","setAttribute","editRestaurant","undefined","appendChild","logout","resp","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/alexfederico/Documents/GitHub/RestaurantApp/frontend/src/app/components/admin/admin.component.html","/Users/alexfederico/Documents/GitHub/RestaurantApp/frontend/src/app/components/admin/admin.component.ts"],"sourcesContent":["<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n\n  <a class=\"navbar-brand\" href=\"#\">\n    <img class=\"rounded-image\" src=\"assets/logo.png\">\n  </a>\n\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarColor02\" aria-controls=\"navbarColor02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n    <span class=\"navbar-toggler-icon\"></span>\n  </button>\n\n  <div class=\"collapse navbar-collapse\" id=\"navbarColor02\">\n    <ul class=\"navbar-nav mr-auto\">\n        <li class=\"nav-item active\">\n          <a class=\"nav-link\" (click)=\"onOpenModal(null, 'add')\">Add a new Restaurant?<span class=\"sr-only\">(current)</span></a>\n        </li>\n    </ul>\n\n\n    <a class=\"navbar-brand\" href=\"login\">\n      <img class=\"rounded-image\" src=\"assets/LoginButton.drawio.png\">\n    </a>\n    <button class=\"navbar-toggler\" type=\"button\"  data-toggle=\"collapse\" data-target=\"#navbarColor02\" (ngSubmit)=\"logout()\" aria-controls=\"navbarColor02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n\n\n    <form class=\"form-inline my-2 my-lg-0\">\n        <!-- <input type=\"search\" (ngModelChange)=\"searchRestaurants(key.value)\" #key=\"ngModel\" ngModel\n        name=\"key\" id=\"searchName\" class=\"form-control mr-sm-2\" placeholder=\"Looking for a New Selection?\" required> -->\n    </form>\n  </div>\n\n</nav>\n\n<div class=\"container-fluid\" id=\"main-container\">\n\n  <div class=\"row \">\n    <div *ngFor=\"let restaurant of restaurants\" class=\"col-md-6 col-xl-3 d-flex\">\n      <div class=\"card m-b-30\">\n          <div class=\"card-body flex-fill row\">\n            <div class=\"col-6\">\n                <a [href]=\"restaurant?.image\" target=\"_blank\"><img src=\"{{restaurant?.image}}\" alt=\"\" class=\"img-fluid img w-60\"></a>\n            </div>\n            <div class=\"col-6 card-title align-self-center mb-0 \">\n                <h5>{{restaurant?.name}}</h5>\n            </div>\n          </div>\n\n          <ul class=\"list-group list-group-flush\">\n            <li class=\"list-group-item d-flex\"><i class=\"fa fa-envelope float-right\"></i>${{restaurant?.price}}</li>\n            <li class=\"list-group-item d-flex\"><i class=\"fa fa-envelope float-right\"></i>{{restaurant?.type}}</li>\n            <li class=\"list-group-item d-flex\"><i class=\"fa fa-envelope float-right\"></i>{{restaurant?.description}}</li>\n          </ul>\n\n          <div class=\"card-body flex-fill selectors\">\n            <div class=\"float-right btn-group btn-group-sm\">\n                <a (click)=\"onOpenModal(restaurant, 'edit')\" class=\"btn btn-primary tooltips\" data-placement=\"top\" data-original-title=\"Edit\"><i class=\"fa fa-pencil\"></i> </a>\n                <a (click)=\"onOpenModal(restaurant, 'delete')\" class=\"btn btn-secondary tooltips\" data-placement=\"top\" data-original-title=\"Delete\"><i class=\"fa fa-times\"></i></a>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Add Restaurant Modal -->\n  <div class=\"modal fade\" id=\"addRestaurantModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"addRestaurantModalLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"addRestaurantModalLabel\">Add new Restaurant</h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n            </button>\n        </div>\n        <div class=\"modal-body\">\n<!--\n            <form #addForm = \"ngForm\" (ngSubmit)=\"onAddRestaurant(addForm)\">\n              <div class=\"form-group\">\n                <label for=\"name\">Name</label>\n                <input type=\"text\" ngModel name=\"name\" class=\"form-control\" id=\"name\" placeholder=\"Name\" required>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"type\">Type</label> //restaurant\n                <input type=\"text\" ngModel name=\"type\" class=\"form-control\" id=\"type\" placeholder=\"Type\" required>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"price\">Price</label>\n                <input type=\"number\" ngModel name=\"price\" class=\"form-control\" id=\"price\" placeholder=\"Price\" required>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"image\">Image</label>\n                <input type=\"text\" ngModel name=\"image\" class=\"form-control\" id=\"image\" placeholder=\"Image\" required>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"description\">Description</label>\n                <input type=\"text\" ngModel name=\"description\" class=\"form-control\" id=\"description\" placeholder=\"Description\" required>\n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" id=\"add-restaurant-form\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                <button [disabled]=\"addForm.invalid\" type=\"submit\" class=\"btn btn-primary\" >Save changes</button>\n              </div>\n            </form> -->\n\n        </div>\n      </div>\n    </div>\n    </div>\n\n  <!-- Edit Restaurant Modal -->\n  <div class=\"modal fade\" id=\"updateRestaurantModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"restaurantEditModalLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"updateRestaurantModalLabel\">Currently editing: {{editRestaurant?.name}}</h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n<!--\n            <form #editForm = \"ngForm\">\n                <div class=\"form-group\">\n                  <label for=\"name\">Name</label>\n                  <input type=\"text\" ngModel = {{editRestaurant?.name}} name=\"name\" class=\"form-control\" id=\"name\" aria-describedby=\"emailHelp\" placeholder=\"Name\">\n                </div>\n\n                <input type=\"hidden\" ngModel = {{editRestaurant?.id}} name=\"id\" class=\"form-control\" id=\"id\" placeholder=\"Name\">\n\n                <div class=\"form-group\">\n                  <label for=\"type\">Type</label>\n                  <input type=\"text\" ngModel = {{editRestaurant?.type}} name=\"type\" class=\"form-control\" id=\"type\" placeholder=\"Type\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"price\">Price</label>\n                  <input type=\"number\" ngModel = {{editRestaurant?.price}} name=\"price\" class=\"form-control\" id=\"price\" placeholder=\"Price\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"image\">Image</label>\n                  <input type=\"text\" ngModel = {{editRestaurant?.image}} name=\"image\" class=\"form-control\" id=\"image\" placeholder=\"Image\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"description\">Description</label>\n                  <input type=\"text\" ngModel = {{editRestaurant?.description}} name=\"description\" class=\"form-control\" id=\"description\" placeholder=\"Description\">\n                </div>\n\n                <div class=\"modal-footer\">\n                  <button type=\"button\" id=\"\" data-dismiss=\"modal\" class=\"btn btn-secondary\">Close</button>\n                  <button (click) = \"onUpdateRestaurant(editForm.value)\" data-dismiss=\"modal\" class=\"btn btn-primary\" >Save changes</button>\n                </div>\n            </form> -->\n\n          </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Delete Restaurant Modal -->\n  <div class=\"modal fade\" id=\"deleteRestaurantModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"deleteModelLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"deleteModelLabel\">Delete Restaurant</h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <p>Are you sure you want to delete {{deleteRestaurant?.name}}?</p>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">No</button>\n                <button (click)=\"onDeleteRestaurant(deleteRestaurant?.id!)\" class=\"btn btn-danger\" data-dismiss=\"modal\">Yes</button>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Notification for no Restaurant -->\n<div *ngIf=\"restaurants?.length == 0\" class=\"col-lg-12 col-md-12 col-xl-12\">\n<div class=\"alert alert-info\" role=\"alert\">\n  <h4 class=\"alert-heading\">No Selections!</h4>\n  <p>No Selections were found.</p>\n</div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Restaurant } from '../../restaurant';\nimport { RestaurantService } from '../../restaurant.service';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css']\n})\nexport class AdminComponent implements OnInit {\n  public restaurants: Restaurant[] = [];\n  public editRestaurant: Restaurant | undefined;\n  public deleteRestaurant: Restaurant | undefined;\n\n  failed: boolean = false;\n  constructor (private router: Router, private restaurantService: RestaurantService) {}\n\n  ngOnInit() {\n    this.getRestaurants();\n  }\n\n  public getRestaurants(): void {\n    this.restaurantService.getRestaurants().subscribe(\n      (response: Restaurant[]) => {\n        this.restaurants = response;\n      },\n      (error: HttpErrorResponse) => {\n        alert(error.message);\n      }\n    );\n  }\n\n  public onAddRestaurant(addForm: NgForm): void {\n    document.getElementById('add-restaurant-form')?.click();\n    this.restaurantService.addRestaurant(addForm.value).subscribe(\n      (response: Restaurant) => {\n        console.log(response);\n        this.getRestaurants();\n        addForm.reset();\n      },\n      (error: HttpErrorResponse) => {\n        alert(error.message);\n        addForm.reset();\n      }\n    );\n  }\n\n  public onUpdateRestaurant(restaurant: Restaurant): void {\n    this.restaurantService.updateRestaurant(restaurant).subscribe(\n      (response: Restaurant) => {\n        console.log(response);\n        this.getRestaurants();\n      },\n      (error: HttpErrorResponse) => {\n        alert(error.message);\n      }\n    );\n  }\n\n  public onDeleteRestaurant(restaurantId: number): void {\n    this.restaurantService.deleteRestaurant(restaurantId).subscribe(\n      (response: void) => {\n        console.log(response);\n        this.getRestaurants();\n      },\n      (error: HttpErrorResponse) => {\n        alert(error.message);\n      }\n    );\n  }\n\n  public searchRestaurants(key: string): void {\n    const results: Restaurant[] = [];\n    for(const restaurant of this.restaurants) {\n      if (restaurant.name.toLowerCase().indexOf(key.toLowerCase()) !== -1\n      || restaurant.type.toLowerCase().indexOf(key.toLowerCase()) !== -1\n      || restaurant.price.toString().indexOf(key.toLowerCase()) !== -1) {\n        results.push(restaurant)\n      }\n    }\n    this.restaurants = results;\n    if (results.length === 0 || !key) {\n      this.getRestaurants();\n    }\n  }\n\n  public onOpenModal(restaurant: Restaurant|null, mode: string): void {\n    const container = document.getElementById('main-container');\n    const button = document.createElement('button');\n    button.type = 'button';\n    button.style.display = 'none';\n    button.setAttribute('data-toggle', 'modal');\n    if (mode === 'add') {\n      button.setAttribute('data-target', '#addRestaurantModal');\n    }\n    if (mode === 'edit') {\n      this.editRestaurant = restaurant || undefined;\n      button.setAttribute('data-target', '#updateRestaurantModal');\n    }\n    if (mode === 'delete') {\n      this.deleteRestaurant = restaurant || undefined;\n      button.setAttribute('data-target', '#deleteRestaurantModal');\n    }\n    container?.appendChild(button);\n    button.click();\n  }\n\n  async logout(){\n    let resp = this.restaurantService.logout();\n  //   resp.subscribe({\n  //     next: resp => this.router.navigate([\"login\"]),\n  //     error:  (error) => this.failed=true//(error)=> this.failed = true\n  //   })\n  resp.subscribe(\n    response => {\n      console.log(response);\n    },\n    (error: HttpErrorResponse) =>{\n      alert(error.message);\n    }\n  );\n  //\n  // (response: this.restaurantService.logout()) => {\n  //   this.restaurants = response;\n  // },\n  // (error: HttpErrorResponse) => {\n  //   alert(error.message);\n  // }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}